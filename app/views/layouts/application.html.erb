<!DOCTYPE html>
<html>
  <head>
    <title>Birl App</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <%= javascript_pack_tag 'application' %>
    <%= stylesheet_link_tag(*sources_from_manifest_entries(['semantic_ui', 'theme'], type: :stylesheet)) %>
    <link rel="manifest" href="/manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  </head>

  <body class="<%= @body_class %>">
    <%= yield %>

    <% if current_user %>
        <script type="text/json" id="server-json">
         {
             "user": <%= raw render template: 'api/v1/users/show', locals: { '@user': current_user }, formats: :json %>,
             "audio": <%= audio_config_json.html_safe %>,
             "lists": <%= lists_json.html_safe %>
         }
        </script>
    <% end %>
  </body>
</html>
